<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
  
  <!-- bootstrap -->
  <!--<link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet"  id="style">-->
  <script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
  
  <!-- highlight.js -->
  <!--<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/default.min.css" rel="stylesheet" id="code-style">-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/highlight.min.js"></script>
  <script>
  hljs.LANGUAGES.r=function(a){var b="([a-zA-Z]|\\.[a-zA-Z.])[a-zA-Z0-9._]*";return{c:[a.HCM,{b:b,l:b,k:{keyword:"function if in break next repeat else for return switch while try tryCatch|10 stop warning require library attach detach source setMethod setGeneric setGroupGeneric setClass ...|10",literal:"NULL NA TRUE FALSE T F Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10"},r:0},{cN:"number",b:"0[xX][0-9a-fA-F]+[Li]?\\b",r:0},{cN:"number",b:"\\d+(?:[eE][+\\-]?\\d*)?L\\b",r:0},{cN:"number",b:"\\d+\\.(?!\\d)(?:i\\b)?",r:0},{cN:"number",b:"\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",r:0},{b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[a.BE],r:0},{cN:"string",b:"'",e:"'",c:[a.BE],r:0}]}}(hljs); </script>
  <!--<script type="text/javascript", src="https://yandex.st/highlightjs/7.3/languages/r.min.js"></script>-->
  
  <!-- Manific Popup -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/0.8.9/jquery.magnific-popup.min.js"></script>
  
  <script type="text/javascript"
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script defer="defer">
  // Function to generate the dynamic table of contents
  jQuery.fn.generate_TOC = function () {
    var base = $(this[0]);
  
    var selectors = ['h1', 'h2', 'h3', 'h4'];
  
    var last_ptr = [{}, {}, {}, {}];
  
    var anchors = {};
  
    generate_anchor = function (text) {
      var test = text.replace(/\W/g, '_');
  
      while(test in anchors){
        //if no suffix, add one
        if(test.match(/_\d+$/) === null){
          test = test + "_2";
        }
        //else generate unique id for duplicates by adding one to the suffix
        else {
          test = test.replace(/_(\d+)$/, function(match, number){ var num=+number+1; return("_" + num) });
        }
      }
      anchors[test]=1;
      return(test);
    }
  
    $(selectors.join(',')).filter(function(index) { return $(this).parent().attr("id") != 'header'; }).each(function () {
  
      var heading = $(this);
      var idx = selectors.indexOf(heading.prop('tagName').toLowerCase());
      var itr = 0;
  
      while (itr <= idx) {
        if (jQuery.isEmptyObject(last_ptr[itr])) {
          last_ptr[itr] = $('<ul>').addClass('nav');
          if (itr === 0) {
            base.append(last_ptr[itr])
          } else {
            if(last_ptr[itr-1].children('li').length === 0){
              last_ptr[itr-1].append(last_ptr[itr]);
            }
            else {
              last_ptr[itr - 1].children('li').last().append(last_ptr[itr]);
            }
          }
        }
        itr++;
      }
      var anchor = generate_anchor(heading.text());
      heading.attr('id', anchor);
      var a = $('<a>')
      .text(heading.text())
      .attr('href', '#' + anchor);
  
    var li = $('<li>')
      .append(a);
  
    last_ptr[idx].append(li);
    for (i = idx + 1; i < last_ptr.length; i++) {
      last_ptr[i] = {};
    }
    });
  }
  /* run scripts when document is ready */
  $(function() {
    "use strict";
  
    var $window = $(window);
    var $body = $(document.body);
  
    /* size of thumbnails */
  
    var hidden_types = ['source']
    var output_types = ['output', 'message', 'warning', 'error']
  
    /* style tables */
    $('table').addClass('table table-striped table-bordered table-hover table-condensed');
  
    $('pre code').each(function(i, e) {
      hljs.highlightBlock(e);
    });
  
    /* Magnific Popup */
    $(".thumbnail").each(function(){
      $(this).magnificPopup({
        disableOn: 768,
        closeOnContentClick: true,
  
        type: 'image',
        items: {
          src: $(this).find('img').attr('src'),
        }
      });
    });
  
    function toggle_block(obj, show) {
      var span = obj.find('span');
      if(show === true){
        span.removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');
        obj.next('pre').slideDown();
      }
      else {
        span.removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');
        obj.next('pre').slideUp();
      }
    }
  
    function toggle_thumbnails(imgs, show){
      if(show === true){
        imgs.parents().show()
        imgs.slideDown();
      }
      else {
        imgs.slideUp(400, function(){ $(this).parent().hide(); });
      }
    }
  
    function global_toggle(obj){
      var type = obj.attr('type');
      var show = !obj.parent('li').hasClass('active');
      if(show === true){
        obj.parent('li').addClass('active');
      }
      else{
        obj.parent('li').removeClass('active');
      }
      if(type == 'figure'){
        toggle_thumbnails($('.thumbnail img'), show);
      }
      else {
        $('.toggle.' + type).each(function() { toggle_block($(this), show); });
      }
    }
  
    /* onclick toggle next code block */
    $('.toggle').click(function() {
      var span = $(this).find('span');
      toggle_block($(this), !span.hasClass('glyphicon-chevron-down'));
      return false
    })
  
    // global toggles
    $('.toggle-global').click(function(){
      var type = $(this).attr('type');
      if(type === 'all-source'){
          $('li a.source').each(function() {
            global_toggle($(this));
          });
        }
      else if(type === 'all-output'){
        $.each(output_types, function(i, val){
          console.log(val);
          global_toggle($('li a.' + val));
        });
      }
      else {
        console.log($(this));
        global_toggle($(this));
      }
      return false;
    });
    /* table of contents */
    if($(['h1', 'h2', 'h3', 'h4'].join(',')).length > 0){
      $('body > #wrap > .container > .row').append('<div class="col-md-2"><div id="toc" class="well sidebar sidenav affix hidden-print"/></div>');
      $('#toc').generate_TOC();
    }
  
    $.each(hidden_types, function(i, type) {
      $('li[type=' + type + ']').each(function(){ global_toggle($(this)); });
    });
  
    /* remove paragraphs with no content */
    $('p:empty').remove();
  
    $body.scrollspy({
      target: '.sidebar',
    });
  
    /* theme switch */
    $('.theme-switch').click(function(){
      var css = $('link[title=' + $(this).attr('title') + ']');
      $('#theme[rel=stylesheet]').attr('href', css.attr('href'));
      $('.theme-switch').closest('li').removeClass('active');
      $(this).closest('li').addClass('active');
      return false;
    });
    /* code style switch */ //TODO use same function for both of these?
    $('.highlight-switch').click(function(){
      var css = $('link[title="' + $(this).attr('title') + '"]');
      $('#highlight[rel=stylesheet]').attr('href', css.attr('href'));
      $('.highlight-switch').closest('li').removeClass('active');
      $(this).closest('li').addClass('active');
      return false;
    });
  
    //TODO refresh on show/hide
    $window.on('load', function () {
      $body.scrollspy('refresh');
    })
  
  });
  
  </script>
  <style>
  /* Knitr_bootstrap styles */
  #header {
    display: none !important;
    visibility: hidden !important;
  }
  #wrap .container-fluid {
    padding: 0;
    overflow: hidden;
  }
  .toggle{
    text-transform: capitalize;
  }
  
  .toggle-global{
    text-transform: capitalize;
  }
  
  /* Sticky footer styles */
  * {
    margin:0;
  }
  html,
  body {
      height: 100%;
      padding:0 !important;
      /* The html and body elements cannot have any padding or margin. */
      /*overflow-x: hidden;*/
  }
  
  /* Wrapper for page content to push down footer */
  #wrap {
      min-height: 100%;
      height: auto !important;
      height: 100%;
      /* Negative indent footer by it's height */
      margin: 0 auto -120px;
  }
  
  /* Set the fixed height of the footer here */
  #push,
  #footer {
      height: 120px;
  }
  
  #footer {
    text-align: center;
  }
  
  /* Top level subheader elements.  These are the first nested items underneath a header element. */
  .header li {
    font-size: 20px;
  }
  
  /* Makes the font smaller for all subheader elements. */
  .sub-header li {
      font-size: 12px;
  }
  
  button.thumbnails {
    margin-left:0px;
  }
  
  /*
   * Side navigation
   *
   * Scrollspy and affixed enhanced navigation to highlight sections and secondary
   * sections of docs content.
   */
  
  /* By default it's not affixed in mobile views, so undo that */
  .sidebar.affix {
    position: static;
  }
  
  /* First level of nav */
  .sidenav {
    margin-top: 30px;
    margin-bottom: 30px;
    padding-top:    10px;
    padding-bottom: 10px;
    border-radius: 5px;
  }
  
  /* All levels of nav */
  .sidebar .nav > li > a {
    display: block;
    padding: 5px 20px;
  }
  .sidebar .nav > li > a:hover,
  .sidebar .nav > li > a:focus {
    text-decoration: none;
    border-right: 1px solid;
  }
  .sidebar .nav > .active > a,
  .sidebar .nav > .active:hover > a,
  .sidebar .nav > .active:focus > a {
    font-weight: bold;
    background-color: transparent;
    border-right: 1px solid;
  }
  
  /* Nav: second level (shown on .active) */
  .sidebar .nav .nav {
    display: none; /* Hide by default, but at >768px, show it */
    margin-bottom: 8px;
  }
  .sidebar .nav .nav > li > a {
    padding-top:    3px;
    padding-bottom: 3px;
    padding-left: 30px;
    font-size: 90%;
  }
  
  .sidebar .nav .nav .nav > li > a {
    padding-left: 40px;
  }
  .sidebar .nav .nav .nav .nav > li > a {
    padding-left: 50px;
  }
  
  /* Show and affix the side nav when space allows it */
  @media screen and (min-width: 992px) {
    .sidebar .nav > .active > ul {
      display: block;
    }
    /* Widen the fixed sidebar */
    .sidebar.affix,
    .sidebar.affix-bottom {
      width: 213px;
    }
    .sidebar.affix-top,
    .sidebar.affix {
      position: fixed; /* Undo the static from mobile first approach */
      top: 30px;
    }
    .sidebar.affix-bottom {
      position: absolute; /* Undo the static from mobile first approach */
    }
    .sidebar.affix-bottom .sidenav,
    .sidebar.affix .sidenav {
      margin-top: 0;
      margin-bottom: 0;
    }
  }
  @media screen and (min-width: 1200px) {
    /* Widen the fixed sidebar again */
    .sidebar.affix-bottom,
    .sidebar.affix {
      width: 263px;
    }
  }
  
  #toc {
    padding: 10px 0px;
    margin:0;
    border:0;
  }
  
  
  .panel pre {
    margin: 0;
    padding: 0;
    border: 0;
  }
  button + pre {
    margin: 0;
    padding: 0;
  }
  pre code {
    border-radius: 0;
  }
  /* Magnific Popup CSS */
  .mfp-bg {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1042;
    overflow: hidden;
    position: fixed;
    background: #0b0b0b;
    opacity: 0.8;
    filter: alpha(opacity=80); }
  
  .mfp-wrap {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1043;
    position: fixed;
    outline: none !important;
    -webkit-backface-visibility: hidden; }
  
  .mfp-container {
    text-align: center;
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
    padding: 0 8px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box; }
  
  .mfp-container:before {
    content: '';
    display: inline-block;
    height: 100%;
    vertical-align: middle; }
  
  .mfp-align-top .mfp-container:before {
    display: none; }
  
  .mfp-content {
    position: relative;
    display: inline-block;
    vertical-align: middle;
    margin: 0 auto;
    text-align: left;
    z-index: 1045; }
  
  .mfp-inline-holder .mfp-content,
  .mfp-ajax-holder .mfp-content {
    width: 100%;
    cursor: auto; }
  
  .mfp-ajax-cur {
    cursor: progress; }
  
  .mfp-zoom-out-cur,
  .mfp-zoom-out-cur .mfp-image-holder .mfp-close {
    cursor: -moz-zoom-out;
    cursor: -webkit-zoom-out;
    cursor: zoom-out; }
  
  .mfp-zoom {
    cursor: pointer;
    cursor: -webkit-zoom-in;
    cursor: -moz-zoom-in;
    cursor: zoom-in; }
  
  .mfp-auto-cursor .mfp-content {
    cursor: auto; }
  
  .mfp-close,
  .mfp-arrow,
  .mfp-preloader,
  .mfp-counter {
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none; }
  
  .mfp-loading.mfp-figure {
    display: none; }
  
  .mfp-hide {
    display: none !important; }
  
  .mfp-preloader {
    color: #cccccc;
    position: absolute;
    top: 50%;
    width: auto;
    text-align: center;
    margin-top: -0.8em;
    left: 8px;
    right: 8px;
    z-index: 1044; }
  
  .mfp-preloader a {
    color: #cccccc; }
  
  .mfp-preloader a:hover {
    color: white; }
  
  .mfp-s-ready .mfp-preloader {
    display: none; }
  
  .mfp-s-error .mfp-content {
    display: none; }
  
  button.mfp-close,
  button.mfp-arrow {
    overflow: visible;
    cursor: pointer;
    background: transparent;
    border: 0;
    -webkit-appearance: none;
    display: block;
    padding: 0;
    z-index: 1046;
    -webkit-box-shadow: none;
    box-shadow: none; }
  
  button::-moz-focus-inner {
    padding: 0;
    border: 0; }
  
  .mfp-close {
    width: 44px;
    height: 44px;
    line-height: 44px;
    position: absolute;
    right: 0;
    top: 0;
    text-decoration: none;
    text-align: center;
    opacity: 0.65;
    padding: 0 0 18px 10px;
    color: white;
    font-style: normal;
    font-size: 28px;
    font-family: Arial, Baskerville, monospace; }
    .mfp-close:hover, .mfp-close:focus {
      opacity: 1; }
    .mfp-close:active {
      top: 1px; }
  
  .mfp-close-btn-in .mfp-close {
    color: #333333; }
  
  .mfp-image-holder .mfp-close,
  .mfp-iframe-holder .mfp-close {
    color: white;
    right: -6px;
    text-align: right;
    padding-right: 6px;
    width: 100%; }
  
  .mfp-counter {
    position: absolute;
    top: 0;
    right: 0;
    color: #cccccc;
    font-size: 12px;
    line-height: 18px; }
  
  .mfp-arrow {
    position: absolute;
    opacity: 0.65;
    margin: 0;
    top: 50%;
    margin-top: -55px;
    padding: 0;
    width: 90px;
    height: 110px;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0); }
  
  .mfp-arrow:active {
    margin-top: -54px; }
  
  .mfp-arrow:hover,
  .mfp-arrow:focus {
    opacity: 1; }
  
  .mfp-arrow:before, .mfp-arrow:after,
  .mfp-arrow .mfp-b,
  .mfp-arrow .mfp-a {
    content: '';
    display: block;
    width: 0;
    height: 0;
    position: absolute;
    left: 0;
    top: 0;
    margin-top: 35px;
    margin-left: 35px;
    border: medium inset transparent; }
  .mfp-arrow:after,
  .mfp-arrow .mfp-a {
    border-top-width: 13px;
    border-bottom-width: 13px;
    top: 8px; }
  .mfp-arrow:before,
  .mfp-arrow .mfp-b {
    border-top-width: 21px;
    border-bottom-width: 21px; }
  
  .mfp-arrow-left {
    left: 0; }
    .mfp-arrow-left:after,
    .mfp-arrow-left .mfp-a {
      border-right: 17px solid white;
      margin-left: 31px; }
    .mfp-arrow-left:before,
    .mfp-arrow-left .mfp-b {
      margin-left: 25px;
      border-right: 27px solid #3f3f3f; }
  
  .mfp-arrow-right {
    right: 0; }
    .mfp-arrow-right:after,
    .mfp-arrow-right .mfp-a {
      border-left: 17px solid white;
      margin-left: 39px; }
    .mfp-arrow-right:before,
    .mfp-arrow-right .mfp-b {
      border-left: 27px solid #3f3f3f; }
  
  .mfp-iframe-holder {
    padding-top: 40px;
    padding-bottom: 40px; }
  
  .mfp-iframe-holder .mfp-content {
    line-height: 0;
    width: 100%;
    max-width: 900px; }
  
  .mfp-iframe-scaler {
    width: 100%;
    height: 0;
    overflow: hidden;
    padding-top: 56.25%; }
  
  .mfp-iframe-scaler iframe {
    position: absolute;
    display: block;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.6);
    background: black; }
  
  .mfp-iframe-holder .mfp-close {
    top: -40px; }
  
  /* Main image in popup */
  img.mfp-img {
    width: auto;
    max-width: 100%;
    height: auto;
    display: block;
    line-height: 0;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    padding: 40px 0 40px;
    margin: 0 auto; }
  
  /* The shadow behind the image */
  .mfp-figure:after {
    content: '';
    position: absolute;
    left: 0;
    top: 40px;
    bottom: 40px;
    display: block;
    right: 0;
    width: auto;
    height: auto;
    z-index: -1;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.6);
    background: #444444; }
  
  .mfp-figure {
    line-height: 0; }
  
  .mfp-bottom-bar {
    margin-top: -36px;
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    cursor: auto; }
  
  .mfp-title {
    text-align: left;
    line-height: 18px;
    color: #f3f3f3;
    word-wrap: break-word;
    padding-right: 36px; }
  
  .mfp-figure small {
    color: #bdbdbd;
    display: block;
    font-size: 12px;
    line-height: 14px; }
  
  .mfp-image-holder .mfp-content {
    max-width: 100%; }
  
  .mfp-gallery .mfp-image-holder .mfp-figure {
    cursor: pointer; }
  
  @media screen and (max-width: 800px) and (orientation: landscape), screen and (max-height: 300px) {
    /**
     * Remove all paddings around the image on small screen
     */
    .mfp-img-mobile .mfp-image-holder {
      padding-left: 0;
      padding-right: 0; }
  
    .mfp-img-mobile img.mfp-img {
      padding: 0; }
  
    /* The shadow behind the image */
    .mfp-img-mobile .mfp-figure:after {
      top: 0;
      bottom: 0; }
  
    .mfp-img-mobile .mfp-bottom-bar {
      background: rgba(0, 0, 0, 0.6);
      bottom: 0;
      margin: 0;
      top: auto;
      padding: 3px 5px;
      position: fixed;
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box; }
  
    .mfp-img-mobile .mfp-bottom-bar:empty {
      padding: 0; }
  
    .mfp-img-mobile .mfp-counter {
      right: 5px;
      top: 3px; }
  
    .mfp-img-mobile .mfp-close {
      top: 0;
      right: 0;
      width: 35px;
      height: 35px;
      line-height: 35px;
      background: rgba(0, 0, 0, 0.6);
      position: fixed;
      text-align: center;
      padding: 0; }
  
    .mfp-img-mobile .mfp-figure small {
      display: inline;
      margin-left: 5px; } }
  @media all and (max-width: 900px) {
    .mfp-arrow {
      -webkit-transform: scale(0.75);
      transform: scale(0.75); }
  
    .mfp-arrow-left {
      -webkit-transform-origin: 0;
      transform-origin: 0; }
  
    .mfp-arrow-right {
      -webkit-transform-origin: 100%;
      transform-origin: 100%; }
  
    .mfp-container {
      padding-left: 6px;
      padding-right: 6px; } }
  .mfp-ie7 .mfp-img {
    padding: 0; }
  .mfp-ie7 .mfp-bottom-bar {
    width: 600px;
    left: 50%;
    margin-left: -300px;
    margin-top: 5px;
    padding-bottom: 5px; }
  .mfp-ie7 .mfp-container {
    padding: 0; }
  .mfp-ie7 .mfp-content {
    padding-top: 44px; }
  .mfp-ie7 .mfp-close {
    top: 0;
    right: 0;
    padding-top: 0; }
  
  //Magnific overrides
  .mfp-image img{
    background: white;
  }
  .mfp-figure:after {
    background: white;
  }
  
  /*
   * Off Canvas navbar toggle right
   * --------------------------------------------------
   */
  
  @media screen and (max-width: 768px) {
    .row-offcanvas .collapsing {
    -webkit-transition: none 0;
      -moz-transition: none 0;
      transition: none 0;
    }
   .row-offcanvas .navbar {
    position: absolute;
    z-index: 2;
      right:0;
      height:100%;
      width:55px;
      border:0;
      background-color:transparent;
    }
    .row-offcanvas .navbar-toggle {
      margin-right: 5px;
      margin-left: 5px;
    }
    .row-offcanvas {
      position: relative;
    }
    .row-offcanvas-right.active .navbar {
    position: absolute;
    z-index: 2;
      right: -28.4%;
      width:40%;
      background-color:#eee;
      border:0 solid #ddd;
      border-left-width:1px;
    }
    .row-offcanvas-right.active {
      left: -30%;
    }
    .row-offcanvas-right.active .navbar-collapse {
      position: relative;
      width: 100%;
    }
    .row-offcanvas .content {
    /*width:calc(100% - 60px);*/
    }
  }
  </style>
</head>
<body>
<title>
NON-PERSONALIZED RECOMMENDER SYSTEMS USING MOVIE-LENS DATASET
</title>
<div id="wrap">
<div class="container">
<div class="row row-offcanvas row-offcanvas-right">
<div class="contents col-xs-12 col-md-10">
<h1 id="non-personalized-recommender-systems-using-movie-lens-dataset">NON-PERSONALIZED RECOMMENDER SYSTEMS USING MOVIE-LENS DATASET</h1>
<p>Non-personalized recommenders systems is a system where everyones gets to see the same set of recommendation. The site doesn't logs in user details and transaction info, and the site assumes that every user is same and displays a list of general recommendations.</p>
<p>To explain this I am going to use the MovieLens data sets that were collected by the GroupLens Research Project at the University of Minnesota.</p>
<p>This data set consists of: * 100,000 ratings (1-5) from 943 users on 1682 movies. * Each user has rated at least 20 movies. * Simple demographic info for the users (age, gender, occupation, zip)</p>
<p>I have made available their dataset and the ipython notebook used for this exercise in my github page.</p>
<pre><code>import pandas as pd
import numpy as np
from plotly import tools
import plotly.plotly as py
from plotly.graph_objs import *
import datetime


dfdata=pd.read_csv(&#39;data/ml-100k/u.data&#39; , sep=&quot;\t&quot; , names=[&#39;userid&#39;, &#39;itemid&#39;, &#39;rating&#39;, &#39;timestamp&#39;])


dfdata.head()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">userid</th>
<th align="left">itemid</th>
<th align="left">rating</th>
<th align="left">timestamp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">0</td>
<td align="left">196</td>
<td align="left">242</td>
<td align="left">3</td>
<td align="left">881250949</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">186</td>
<td align="left">302</td>
<td align="left">3</td>
<td align="left">891717742</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="left">22</td>
<td align="left">377</td>
<td align="left">1</td>
<td align="left">878887116</td>
</tr>
<tr class="even">
<td align="left">3</td>
<td align="left">244</td>
<td align="left">51</td>
<td align="left">2</td>
<td align="left">880606923</td>
</tr>
<tr class="odd">
<td align="left">4</td>
<td align="left">166</td>
<td align="left">346</td>
<td align="left">1</td>
<td align="left">886397596</td>
</tr>
</tbody>
</table>
<p>The fields in this dataset are the userid, itemid (movie) that a paerticular user has rating, his rating and the corresponding time at which the user has rated the movie. Please note that the timestamps are unix seconds since 1/1/1970 UTC. Lets create a fundtion that converts this information into actual datetime object</p>
<pre><code>def epoch_to_datetime(timeinsecs):
    return datetime.datetime.fromtimestamp(timeinsecs)</code></pre>
<p>Converting the timestamps into the corresponing datetime object</p>
<pre><code>dfdata[&#39;timestamp&#39;]=dfdata[&#39;timestamp&#39;].apply(lambda x:epoch_to_datetime(x))


dfdata.head()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">userid</th>
<th align="left">itemid</th>
<th align="left">rating</th>
<th align="left">timestamp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">0</td>
<td align="left">196</td>
<td align="left">242</td>
<td align="left">3</td>
<td align="left">1997-12-04 07:55:49</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">186</td>
<td align="left">302</td>
<td align="left">3</td>
<td align="left">1998-04-04 11:22:22</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="left">22</td>
<td align="left">377</td>
<td align="left">1</td>
<td align="left">1997-11-06 23:18:36</td>
</tr>
<tr class="even">
<td align="left">3</td>
<td align="left">244</td>
<td align="left">51</td>
<td align="left">2</td>
<td align="left">1997-11-26 21:02:03</td>
</tr>
<tr class="odd">
<td align="left">4</td>
<td align="left">166</td>
<td align="left">346</td>
<td align="left">1</td>
<td align="left">1998-02-01 21:33:16</td>
</tr>
</tbody>
</table>
<pre><code>dfdata.info()

&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Int64Index: 100000 entries, 0 to 99999
Data columns (total 4 columns):
userid       100000 non-null int64
itemid       100000 non-null int64
rating       100000 non-null int64
timestamp    100000 non-null datetime64[ns]
dtypes: datetime64[ns](1), int64(3)
memory usage: 3.8 MB</code></pre>
<p>Now lets read the u.item data that contains the corresponding movie names for the movie id (itemid)</p>
<p>Information about the items (movies); this is a tab separated list of movie id | movie title | release date | video release date | IMDb URL | unknown | Action | Adventure | Animation | Children's | Comedy | Crime | Documentary | Drama | Fantasy | Film-Noir | Horror | Musical | Mystery | Romance | Sci-Fi | Thriller | War | Western |</p>
<p>The last 19 fields are the genres, a 1 indicates the movie is of that genre, a 0 indicates it is not; movies can be in several genres at once. The movie ids are the ones used in the u.data data set.</p>
<pre><code>dfmovie=pd.read_csv(&#39;data/ml-100k/u.item&#39; , sep=&#39;|&#39; , names=[&#39;itemid&#39;,&#39;movie_title&#39;,&#39;release_date&#39;,&#39;video_release_date&#39;,&#39;imdb_url&#39;,&#39;unknown&#39;,&#39;action&#39;,&#39;advanture&#39;,&#39;animation&#39;,&#39;children&#39;,&#39;comedy&#39;,&#39;crime&#39;,&#39;documentary&#39;,&#39;drama&#39;,&#39;fantasy&#39;,&#39;film-noir&#39;,&#39;horror&#39;,&#39;musical&#39;,&#39;mystery&#39;,&#39;romance&#39;,&#39;scifi&#39;,&#39;thriller&#39;,&#39;war&#39;,&#39;western&#39;],parse_dates=True)


dfmovie.head()</code></pre>
<div>
<table border="1" class="dataframe">
<thead>
<pre><code>&lt;tr style=&quot;text-align: right;&quot;&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;itemid&lt;/th&gt;
  &lt;th&gt;movie_title&lt;/th&gt;
  &lt;th&gt;release_date&lt;/th&gt;
  &lt;th&gt;video_release_date&lt;/th&gt;
  &lt;th&gt;imdb_url&lt;/th&gt;
  &lt;th&gt;unknown&lt;/th&gt;
  &lt;th&gt;action&lt;/th&gt;
  &lt;th&gt;advanture&lt;/th&gt;
  &lt;th&gt;animation&lt;/th&gt;
  &lt;th&gt;children&lt;/th&gt;
  &lt;th&gt;...&lt;/th&gt;
  &lt;th&gt;fantasy&lt;/th&gt;
  &lt;th&gt;film-noir&lt;/th&gt;
  &lt;th&gt;horror&lt;/th&gt;
  &lt;th&gt;musical&lt;/th&gt;
  &lt;th&gt;mystery&lt;/th&gt;
  &lt;th&gt;romance&lt;/th&gt;
  &lt;th&gt;scifi&lt;/th&gt;
  &lt;th&gt;thriller&lt;/th&gt;
  &lt;th&gt;war&lt;/th&gt;
  &lt;th&gt;western&lt;/th&gt;
&lt;/tr&gt;</code></pre>
</thead>
<tbody>
<pre><code>&lt;tr&gt;
  &lt;th&gt;0&lt;/th&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;Toy Story (1995)&lt;/td&gt;
  &lt;td&gt;01-Jan-1995&lt;/td&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;http://us.imdb.com/M/title-exact?Toy%20Story%2...&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;...&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;1&lt;/th&gt;
  &lt;td&gt;2&lt;/td&gt;
  &lt;td&gt;GoldenEye (1995)&lt;/td&gt;
  &lt;td&gt;01-Jan-1995&lt;/td&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;http://us.imdb.com/M/title-exact?GoldenEye%20(...&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;...&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;2&lt;/th&gt;
  &lt;td&gt;3&lt;/td&gt;
  &lt;td&gt;Four Rooms (1995)&lt;/td&gt;
  &lt;td&gt;01-Jan-1995&lt;/td&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;http://us.imdb.com/M/title-exact?Four%20Rooms%...&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;...&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;3&lt;/th&gt;
  &lt;td&gt;4&lt;/td&gt;
  &lt;td&gt;Get Shorty (1995)&lt;/td&gt;
  &lt;td&gt;01-Jan-1995&lt;/td&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;http://us.imdb.com/M/title-exact?Get%20Shorty%...&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;...&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;4&lt;/th&gt;
  &lt;td&gt;5&lt;/td&gt;
  &lt;td&gt;Copycat (1995)&lt;/td&gt;
  &lt;td&gt;01-Jan-1995&lt;/td&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;http://us.imdb.com/M/title-exact?Copycat%20(1995)&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;...&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</tbody>
</table>
<p>
5 rows Ã— 24 columns
</p>
</div>
<p>For the sake of this exercise I am just using the movie title and itemid (movie id), lets ignore other columns</p>
<pre><code>dfmovie=dfmovie[[&#39;itemid&#39;,&#39;movie_title&#39;]]


dfmovie.head()</code></pre>
<div>
<table border="1" class="dataframe">
<thead>
<pre><code>&lt;tr style=&quot;text-align: right;&quot;&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;itemid&lt;/th&gt;
  &lt;th&gt;movie_title&lt;/th&gt;
&lt;/tr&gt;</code></pre>
</thead>
<tbody>
<pre><code>&lt;tr&gt;
  &lt;th&gt;0&lt;/th&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;Toy Story (1995)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;1&lt;/th&gt;
  &lt;td&gt;2&lt;/td&gt;
  &lt;td&gt;GoldenEye (1995)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;2&lt;/th&gt;
  &lt;td&gt;3&lt;/td&gt;
  &lt;td&gt;Four Rooms (1995)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;3&lt;/th&gt;
  &lt;td&gt;4&lt;/td&gt;
  &lt;td&gt;Get Shorty (1995)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;4&lt;/th&gt;
  &lt;td&gt;5&lt;/td&gt;
  &lt;td&gt;Copycat (1995)&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</tbody>
</table>
</div>
<p>Lets merge all these data into our original dataframe so that we also have all the movie information alongside.</p>
<pre><code>df=pd.merge(dfdata,dfmovie,on=&#39;itemid&#39;)


df.head()</code></pre>
<div>
<table border="1" class="dataframe">
<thead>
<pre><code>&lt;tr style=&quot;text-align: right;&quot;&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;userid&lt;/th&gt;
  &lt;th&gt;itemid&lt;/th&gt;
  &lt;th&gt;rating&lt;/th&gt;
  &lt;th&gt;timestamp&lt;/th&gt;
  &lt;th&gt;movie_title&lt;/th&gt;
&lt;/tr&gt;</code></pre>
</thead>
<tbody>
<pre><code>&lt;tr&gt;
  &lt;th&gt;0&lt;/th&gt;
  &lt;td&gt;196&lt;/td&gt;
  &lt;td&gt;242&lt;/td&gt;
  &lt;td&gt;3&lt;/td&gt;
  &lt;td&gt;1997-12-04 07:55:49&lt;/td&gt;
  &lt;td&gt;Kolya (1996)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;1&lt;/th&gt;
  &lt;td&gt;63&lt;/td&gt;
  &lt;td&gt;242&lt;/td&gt;
  &lt;td&gt;3&lt;/td&gt;
  &lt;td&gt;1997-10-01 16:06:30&lt;/td&gt;
  &lt;td&gt;Kolya (1996)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;2&lt;/th&gt;
  &lt;td&gt;226&lt;/td&gt;
  &lt;td&gt;242&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
  &lt;td&gt;1998-01-03 20:37:51&lt;/td&gt;
  &lt;td&gt;Kolya (1996)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;3&lt;/th&gt;
  &lt;td&gt;154&lt;/td&gt;
  &lt;td&gt;242&lt;/td&gt;
  &lt;td&gt;3&lt;/td&gt;
  &lt;td&gt;1997-11-09 21:03:55&lt;/td&gt;
  &lt;td&gt;Kolya (1996)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;4&lt;/th&gt;
  &lt;td&gt;306&lt;/td&gt;
  &lt;td&gt;242&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
  &lt;td&gt;1997-10-10 10:16:33&lt;/td&gt;
  &lt;td&gt;Kolya (1996)&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</tbody>
</table>
</div>
<p>Now say we are entering a website like Netflix without logging in and not providing any user-specific information. For non-personalized recommendation, the question is what movies do we recommend for the users to watch. There are many ways to approach this, lets take a stab at it one by one.</p>
<h2 id="mean-rating">MEAN RATING</h2>
<p>In this approach we calculate the mean mean rating for each movie, order with the highest rating listed first, and submit the top rated movies.</p>
<pre><code>grouped=df.groupby(&#39;movie_title&#39;)


grouped.aggregate(np.mean)[&#39;rating&#39;].sort(ascending=False,inplace=False).head(20)

/Users/aukauk/anaconda3/envs/python2/lib/python2.7/site-packages/ipykernel/__main__.py:1: FutureWarning:

sort is deprecated, use sort_values(inplace=True) for for INPLACE sorting






movie_title
Marlene Dietrich: Shadow and Light (1996)                 5.000000
Prefontaine (1997)                                        5.000000
Santa with Muscles (1996)                                 5.000000
Star Kid (1997)                                           5.000000
Someone Else&#39;s America (1995)                             5.000000
Entertaining Angels: The Dorothy Day Story (1996)         5.000000
Saint of Fort Washington, The (1993)                      5.000000
Great Day in Harlem, A (1994)                             5.000000
They Made Me a Criminal (1939)                            5.000000
Aiqing wansui (1994)                                      5.000000
Pather Panchali (1955)                                    4.625000
Anna (1996)                                               4.500000
Everest (1998)                                            4.500000
Maya Lin: A Strong Clear Vision (1994)                    4.500000
Some Mother&#39;s Son (1996)                                  4.500000
Close Shave, A (1995)                                     4.491071
Schindler&#39;s List (1993)                                   4.466443
Wrong Trousers, The (1993)                                4.466102
Casablanca (1942)                                         4.456790
Wallace &amp; Gromit: The Best of Aardman Animation (1996)    4.447761
Name: rating, dtype: float64




avg_rating_df=grouped.aggregate(np.mean)[&#39;rating&#39;].sort(ascending=False,inplace=False).to_frame().reset_index()

/Users/aukauk/anaconda3/envs/python2/lib/python2.7/site-packages/ipykernel/__main__.py:1: FutureWarning:

sort is deprecated, use sort_values(inplace=True) for for INPLACE sorting




avg_rating_df.head()</code></pre>
<div>
<table border="1" class="dataframe">
<thead>
<pre><code>&lt;tr style=&quot;text-align: right;&quot;&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;movie_title&lt;/th&gt;
  &lt;th&gt;rating&lt;/th&gt;
&lt;/tr&gt;</code></pre>
</thead>
<tbody>
<pre><code>&lt;tr&gt;
  &lt;th&gt;0&lt;/th&gt;
  &lt;td&gt;Marlene Dietrich: Shadow and Light (1996)&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;1&lt;/th&gt;
  &lt;td&gt;Prefontaine (1997)&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;2&lt;/th&gt;
  &lt;td&gt;Santa with Muscles (1996)&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;3&lt;/th&gt;
  &lt;td&gt;Star Kid (1997)&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;4&lt;/th&gt;
  &lt;td&gt;Someone Else&#39;s America (1995)&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</tbody>
</table>
</div>
<p>Say I want to recommend all the users in the front landing page the movies with the average rating of 5 stars, I would recommend the following movies.</p>
<pre><code>avg_rating_df[avg_rating_df[&#39;rating&#39;]==5]</code></pre>
<div>
<table border="1" class="dataframe">
<thead>
<pre><code>&lt;tr style=&quot;text-align: right;&quot;&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;movie_title&lt;/th&gt;
  &lt;th&gt;rating&lt;/th&gt;
&lt;/tr&gt;</code></pre>
</thead>
<tbody>
<pre><code>&lt;tr&gt;
  &lt;th&gt;0&lt;/th&gt;
  &lt;td&gt;Marlene Dietrich: Shadow and Light (1996)&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;1&lt;/th&gt;
  &lt;td&gt;Prefontaine (1997)&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;2&lt;/th&gt;
  &lt;td&gt;Santa with Muscles (1996)&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;3&lt;/th&gt;
  &lt;td&gt;Star Kid (1997)&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;4&lt;/th&gt;
  &lt;td&gt;Someone Else&#39;s America (1995)&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;5&lt;/th&gt;
  &lt;td&gt;Entertaining Angels: The Dorothy Day Story (1996)&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;6&lt;/th&gt;
  &lt;td&gt;Saint of Fort Washington, The (1993)&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;7&lt;/th&gt;
  &lt;td&gt;Great Day in Harlem, A (1994)&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;8&lt;/th&gt;
  &lt;td&gt;They Made Me a Criminal (1939)&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;9&lt;/th&gt;
  &lt;td&gt;Aiqing wansui (1994)&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</tbody>
</table>
</div>
<p>Something seems obviously wrong (apologies if your faviourite movies is among in this list), but most of these movies seems not that popular compared to several other good movies I have seen.</p>
<p>To dig more closer, lets get an histogram of how many people have rated these movies that show the average rating of 5 stars.</p>
<pre><code>movie_list=avg_rating_df[avg_rating_df[&#39;rating&#39;]==5][&#39;movie_title&#39;]
num_raters=[]
for movie in movie_list:
    num_raters.append(len(df[df[&#39;movie_title&#39;]==movie]))
print num_raters
data = [
   Histogram (
    x=num_raters
 )
]
py.iplot(data, filename = &#39;Histogram_People_Rating_A_Movie&#39;)

[1, 3, 2, 3, 1, 1, 2, 1, 1, 1]



---------------------------------------------------------------------------

ConnectionError                           Traceback (most recent call last)

&lt;ipython-input-20-a44dca527ceb&gt; in &lt;module&gt;()
      9  )
     10 ]
---&gt; 11 py.iplot(data, filename = &#39;Histogram_People_Rating_A_Movie&#39;)


/Users/aukauk/anaconda3/envs/python2/lib/python2.7/site-packages/plotly/plotly/plotly.pyc in iplot(figure_or_data, **plot_options)
    176     if &#39;auto_open&#39; not in plot_options:
    177         plot_options[&#39;auto_open&#39;] = False
--&gt; 178     url = plot(figure_or_data, **plot_options)
    179 
    180     if isinstance(figure_or_data, dict):


/Users/aukauk/anaconda3/envs/python2/lib/python2.7/site-packages/plotly/plotly/plotly.pyc in plot(figure_or_data, validate, **plot_options)
    260 
    261     plot_options = _plot_option_logic(plot_options)
--&gt; 262     res = _send_to_plotly(figure, **plot_options)
    263     if res[&#39;error&#39;] == &#39;&#39;:
    264         if plot_options[&#39;auto_open&#39;]:


/Users/aukauk/anaconda3/envs/python2/lib/python2.7/site-packages/plotly/plotly/plotly.pyc in _send_to_plotly(figure, **plot_options)
   1418 
   1419     r = requests.post(url, data=payload,
-&gt; 1420                       verify=get_config()[&#39;plotly_ssl_verification&#39;])
   1421     r.raise_for_status()
   1422     r = json.loads(r.text)


/Users/aukauk/anaconda3/envs/python2/lib/python2.7/site-packages/requests/api.pyc in post(url, data, json, **kwargs)
    107     &quot;&quot;&quot;
    108 
--&gt; 109     return request(&#39;post&#39;, url, data=data, json=json, **kwargs)
    110 
    111 


/Users/aukauk/anaconda3/envs/python2/lib/python2.7/site-packages/requests/api.pyc in request(method, url, **kwargs)
     48 
     49     session = sessions.Session()
---&gt; 50     response = session.request(method=method, url=url, **kwargs)
     51     # By explicitly closing the session, we avoid leaving sockets open which
     52     # can trigger a ResourceWarning in some cases, and look like a memory leak


/Users/aukauk/anaconda3/envs/python2/lib/python2.7/site-packages/requests/sessions.pyc in request(self, method, url, params, data, headers, cookies, files, auth, timeout, allow_redirects, proxies, hooks, stream, verify, cert, json)
    466         }
    467         send_kwargs.update(settings)
--&gt; 468         resp = self.send(prep, **send_kwargs)
    469 
    470         return resp


/Users/aukauk/anaconda3/envs/python2/lib/python2.7/site-packages/requests/sessions.pyc in send(self, request, **kwargs)
    574 
    575         # Send the request
--&gt; 576         r = adapter.send(request, **kwargs)
    577 
    578         # Total elapsed time of the request (approximately)


/Users/aukauk/anaconda3/envs/python2/lib/python2.7/site-packages/requests/adapters.pyc in send(self, request, stream, timeout, verify, cert, proxies)
    421                 raise RetryError(e, request=request)
    422 
--&gt; 423             raise ConnectionError(e, request=request)
    424 
    425         except ClosedPoolError as e:


ConnectionError: HTTPSConnectionPool(host=&#39;plot.ly&#39;, port=443): Max retries exceeded with url: /clientresp (Caused by ProxyError(&#39;Cannot connect to proxy.&#39;, NewConnectionError(&#39;&lt;requests.packages.urllib3.connection.VerifiedHTTPSConnection object at 0x10b30e650&gt;: Failed to establish a new connection: [Errno 8] nodename nor servname provided, or not known&#39;,)))</code></pre>
<p>This is exactly where our problem is. The problem is that all of these movies are rated by either 1, 2 or 3 users and they have all given 5 stars to it. That doesnt make these movies great and we would rather shows the movies that have been rated by many number of users and also with highest ratings on our recommendations. This is the issue with a lot of non-personalized recommenders.</p>
<h2 id="scales-and-normalization">SCALES AND NORMALIZATION</h2>
<p>Take a look at the following link : https://janav.wordpress.com/2013/09/21/non-personalized-recommenders/</p>
<p>The author explains amazon.com's non-personalized recommendations that appear in section &quot;customers who bought this item also bought&quot; when users tries to look for a product.</p>
<p>How would it look like when we want to recommend movies instead of amazon product.</p>
<p>To illustrates this, I have taken out the following 5 movies in the movielens dataset.</p>
<pre><code>movies=[&#39;Star Wars (1977)&#39;,&#39;Toy Story (1995)&#39;,&#39;GoodFellas (1990)&#39;,&#39;12 Angry Men (1957)&#39;, &#39;Alien 3 (1992)&#39;,&#39;&#39;]


movies




[&#39;Star Wars (1977)&#39;,
 &#39;Toy Story (1995)&#39;,
 &#39;GoodFellas (1990)&#39;,
 &#39;12 Angry Men (1957)&#39;,
 &#39;Alien 3 (1992)&#39;,
 &#39;&#39;]




dfr=df[df[&#39;movie_title&#39;].isin(movies)]
dfr.head()</code></pre>
<div>
<table border="1" class="dataframe">
<thead>
<pre><code>&lt;tr style=&quot;text-align: right;&quot;&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;userid&lt;/th&gt;
  &lt;th&gt;itemid&lt;/th&gt;
  &lt;th&gt;rating&lt;/th&gt;
  &lt;th&gt;timestamp&lt;/th&gt;
  &lt;th&gt;movie_title&lt;/th&gt;
&lt;/tr&gt;</code></pre>
</thead>
<tbody>
<pre><code>&lt;tr&gt;
  &lt;th&gt;3397&lt;/th&gt;
  &lt;td&gt;308&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;4&lt;/td&gt;
  &lt;td&gt;1998-02-17 09:28:52&lt;/td&gt;
  &lt;td&gt;Toy Story (1995)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;3398&lt;/th&gt;
  &lt;td&gt;287&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
  &lt;td&gt;1997-09-26 21:21:28&lt;/td&gt;
  &lt;td&gt;Toy Story (1995)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;3399&lt;/th&gt;
  &lt;td&gt;148&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;4&lt;/td&gt;
  &lt;td&gt;1997-10-16 09:30:11&lt;/td&gt;
  &lt;td&gt;Toy Story (1995)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;3400&lt;/th&gt;
  &lt;td&gt;280&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;4&lt;/td&gt;
  &lt;td&gt;1998-04-04 06:33:46&lt;/td&gt;
  &lt;td&gt;Toy Story (1995)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;3401&lt;/th&gt;
  &lt;td&gt;66&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;3&lt;/td&gt;
  &lt;td&gt;1997-12-31 12:48:44&lt;/td&gt;
  &lt;td&gt;Toy Story (1995)&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</tbody>
</table>
</div>
<pre><code>dfr=dfr.pivot_table(values=&#39;rating&#39;, index=&#39;userid&#39;, columns=&#39;movie_title&#39;)


dfr.head()</code></pre>
<div>
<table border="1" class="dataframe">
<thead>
<pre><code>&lt;tr style=&quot;text-align: right;&quot;&gt;
  &lt;th&gt;movie_title&lt;/th&gt;
  &lt;th&gt;12 Angry Men (1957)&lt;/th&gt;
  &lt;th&gt;Alien 3 (1992)&lt;/th&gt;
  &lt;th&gt;GoodFellas (1990)&lt;/th&gt;
  &lt;th&gt;Star Wars (1977)&lt;/th&gt;
  &lt;th&gt;Toy Story (1995)&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;userid&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;</code></pre>
</thead>
<tbody>
<pre><code>&lt;tr&gt;
  &lt;th&gt;1&lt;/th&gt;
  &lt;td&gt;5&lt;/td&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;4&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;2&lt;/th&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
  &lt;td&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;4&lt;/th&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
  &lt;td&gt;NaN&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;5&lt;/th&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;4&lt;/td&gt;
  &lt;td&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;6&lt;/th&gt;
  &lt;td&gt;4&lt;/td&gt;
  &lt;td&gt;NaN&lt;/td&gt;
  &lt;td&gt;4&lt;/td&gt;
  &lt;td&gt;4&lt;/td&gt;
  &lt;td&gt;4&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</tbody>
</table>
</div>
<p>Lets convert all nans to 0 and all other ratings to 1s.</p>
<pre><code>def convert_to_zeros_ones(x):
    if x &gt; 0:
        return 1
    else:
        return 0
dfr=dfr.applymap(lambda x:convert_to_zeros_ones(x))
dfr.head()</code></pre>
<div>
<table border="1" class="dataframe">
<thead>
<pre><code>&lt;tr style=&quot;text-align: right;&quot;&gt;
  &lt;th&gt;movie_title&lt;/th&gt;
  &lt;th&gt;12 Angry Men (1957)&lt;/th&gt;
  &lt;th&gt;Alien 3 (1992)&lt;/th&gt;
  &lt;th&gt;GoodFellas (1990)&lt;/th&gt;
  &lt;th&gt;Star Wars (1977)&lt;/th&gt;
  &lt;th&gt;Toy Story (1995)&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;userid&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;</code></pre>
</thead>
<tbody>
<pre><code>&lt;tr&gt;
  &lt;th&gt;1&lt;/th&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;2&lt;/th&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;4&lt;/th&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;5&lt;/th&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;6&lt;/th&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</tbody>
</table>
</div>
<p>Say I like &quot;12 Angry Men&quot; and I want to watch this movie. In order for the non-personalized recommender system to recommender other movies that people have watched based on this movie, we use the following formulae.</p>
<p>Score(X, Y) = Total People who watched X and Y / Total People who watched X</p>
<p>Total People who watched X are: (non-null entries)</p>
<pre><code>dfr[&#39;12 Angry Men (1957)&#39;].sum()




125</code></pre>
<p>Total People who watched X and Y:</p>
<pre><code>y_vals=[&#39;Star Wars (1977)&#39;,&#39;Toy Story (1995)&#39;,&#39;GoodFellas (1990)&#39;, &#39;Alien 3 (1992)&#39;]


score_dict={}
for y in y_vals:
    x_and_y=pd.DataFrame(dfr[&#39;12 Angry Men (1957)&#39;]*dfr[y]).sum()
    score_dict[y]=x_and_y.values*1./dfr[&#39;12 Angry Men (1957)&#39;].sum()


score_dict




{&#39;Alien 3 (1992)&#39;: array([ 0.208]),
 &#39;GoodFellas (1990)&#39;: array([ 0.48]),
 &#39;Star Wars (1977)&#39;: array([ 0.872]),
 &#39;Toy Story (1995)&#39;: array([ 0.648])}</code></pre>
<p>Hence based on the highest scores, we would recommend 'Star Wars (1977)' and 'Toy Story (1995)' for the user to watch.</p>
<h3 id="banana-trap">BANANA TRAP</h3>
<p>We want to make sure we aren't in banana trap here. What is a banana trap?</p>
<p>In a grocery store most of the customers will buy bananas. If someone buys a razor and a banana then you cannot tell that the purchase of a razor influenced the purchase of banana. Hence we need to adjust the formula to handle this case as well. The modified version is</p>
<p>(Total People who watched X and Y / Total People who watched X) / (Total People who did not watch X but watched Y / Total People who did not watch X)</p>
<p>We have the numberator, we just need to calculate the denominator. Lets create a seperate column for people who did not watch 12 Angry Men.</p>
<pre><code>&#39;&#39;&#39;convert 1s to 0s and vice versa for 12 angry men&#39;&#39;&#39;
def ones_to_zeros(x):
    if x==1:
        return 0
    else:
        return 1
dfr[&#39;Not_12_Angry_Men&#39;]=dfr[&#39;12 Angry Men (1957)&#39;].apply(lambda x:ones_to_zeros(x))
dfr.head()</code></pre>
<div>
<table border="1" class="dataframe">
<thead>
<pre><code>&lt;tr style=&quot;text-align: right;&quot;&gt;
  &lt;th&gt;movie_title&lt;/th&gt;
  &lt;th&gt;12 Angry Men (1957)&lt;/th&gt;
  &lt;th&gt;Alien 3 (1992)&lt;/th&gt;
  &lt;th&gt;GoodFellas (1990)&lt;/th&gt;
  &lt;th&gt;Star Wars (1977)&lt;/th&gt;
  &lt;th&gt;Toy Story (1995)&lt;/th&gt;
  &lt;th&gt;Not_12_Angry_Men&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;userid&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;</code></pre>
</thead>
<tbody>
<pre><code>&lt;tr&gt;
  &lt;th&gt;1&lt;/th&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;2&lt;/th&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;4&lt;/th&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;5&lt;/th&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;6&lt;/th&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</tbody>
</table>
</div>
<pre><code>score_dict={}
for y in y_vals:
    x_and_y=pd.DataFrame(dfr[&#39;12 Angry Men (1957)&#39;]*dfr[y]).sum()
    tot_x=dfr[&#39;12 Angry Men (1957)&#39;].sum()
    notx_and_y=pd.DataFrame(dfr[&#39;Not_12_Angry_Men&#39;]*dfr[y]).sum()
    tot_notx=dfr[&#39;Not_12_Angry_Men&#39;].sum()
    score_dict[y]=(x_and_y.values*1./tot_x)/(notx_and_y*1./tot_notx)


score_dict




{&#39;Alien 3 (1992)&#39;: 0    1.576865
 dtype: float64, &#39;GoodFellas (1990)&#39;: 0    1.622169
 dtype: float64, &#39;Star Wars (1977)&#39;: 0    1.032051
 dtype: float64, &#39;Toy Story (1995)&#39;: 0    0.97986
 dtype: float64}</code></pre>
<p>This completely changes the game. Our normalized recommendation after adjusting for banana trap are GoodFellas (1990) and Alien 3 (1992) . This clearly shows that almost a lot of users had rated on the Toy Story and Star Wars.</p>
<h1 id="damped-means">DAMPED MEANS</h1>
<pre><code>df.head()</code></pre>
<div>
<table border="1" class="dataframe">
<thead>
<pre><code>&lt;tr style=&quot;text-align: right;&quot;&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;userid&lt;/th&gt;
  &lt;th&gt;itemid&lt;/th&gt;
  &lt;th&gt;rating&lt;/th&gt;
  &lt;th&gt;timestamp&lt;/th&gt;
  &lt;th&gt;movie_title&lt;/th&gt;
&lt;/tr&gt;</code></pre>
</thead>
<tbody>
<pre><code>&lt;tr&gt;
  &lt;th&gt;0&lt;/th&gt;
  &lt;td&gt;196&lt;/td&gt;
  &lt;td&gt;242&lt;/td&gt;
  &lt;td&gt;3&lt;/td&gt;
  &lt;td&gt;1997-12-04 07:55:49&lt;/td&gt;
  &lt;td&gt;Kolya (1996)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;1&lt;/th&gt;
  &lt;td&gt;63&lt;/td&gt;
  &lt;td&gt;242&lt;/td&gt;
  &lt;td&gt;3&lt;/td&gt;
  &lt;td&gt;1997-10-01 16:06:30&lt;/td&gt;
  &lt;td&gt;Kolya (1996)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;2&lt;/th&gt;
  &lt;td&gt;226&lt;/td&gt;
  &lt;td&gt;242&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
  &lt;td&gt;1998-01-03 20:37:51&lt;/td&gt;
  &lt;td&gt;Kolya (1996)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;3&lt;/th&gt;
  &lt;td&gt;154&lt;/td&gt;
  &lt;td&gt;242&lt;/td&gt;
  &lt;td&gt;3&lt;/td&gt;
  &lt;td&gt;1997-11-09 21:03:55&lt;/td&gt;
  &lt;td&gt;Kolya (1996)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;4&lt;/th&gt;
  &lt;td&gt;306&lt;/td&gt;
  &lt;td&gt;242&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
  &lt;td&gt;1997-10-10 10:16:33&lt;/td&gt;
  &lt;td&gt;Kolya (1996)&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</tbody>
</table>
</div>
<pre><code>grouped=df.groupby([&#39;movie_title&#39;])


dm_df=grouped[&#39;rating&#39;].agg([np.sum, np.mean]).reset_index()


dm_df[&#39;count_ratings&#39;]=grouped.size().reset_index()[0]


dm_df.head()</code></pre>
<div>
<table border="1" class="dataframe">
<thead>
<pre><code>&lt;tr style=&quot;text-align: right;&quot;&gt;
  &lt;th&gt;&lt;/th&gt;
  &lt;th&gt;movie_title&lt;/th&gt;
  &lt;th&gt;sum&lt;/th&gt;
  &lt;th&gt;mean&lt;/th&gt;
  &lt;th&gt;count_ratings&lt;/th&gt;
&lt;/tr&gt;</code></pre>
</thead>
<tbody>
<pre><code>&lt;tr&gt;
  &lt;th&gt;0&lt;/th&gt;
  &lt;td&gt;&#39;Til There Was You (1997)&lt;/td&gt;
  &lt;td&gt;21&lt;/td&gt;
  &lt;td&gt;2.333333&lt;/td&gt;
  &lt;td&gt;9&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;1&lt;/th&gt;
  &lt;td&gt;1-900 (1994)&lt;/td&gt;
  &lt;td&gt;13&lt;/td&gt;
  &lt;td&gt;2.600000&lt;/td&gt;
  &lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;2&lt;/th&gt;
  &lt;td&gt;101 Dalmatians (1996)&lt;/td&gt;
  &lt;td&gt;317&lt;/td&gt;
  &lt;td&gt;2.908257&lt;/td&gt;
  &lt;td&gt;109&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;3&lt;/th&gt;
  &lt;td&gt;12 Angry Men (1957)&lt;/td&gt;
  &lt;td&gt;543&lt;/td&gt;
  &lt;td&gt;4.344000&lt;/td&gt;
  &lt;td&gt;125&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;th&gt;4&lt;/th&gt;
  &lt;td&gt;187 (1997)&lt;/td&gt;
  &lt;td&gt;124&lt;/td&gt;
  &lt;td&gt;3.024390&lt;/td&gt;
  &lt;td&gt;41&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</tbody>
</table>
</div>
<pre><code>&lt;/div&gt;&lt;/div&gt;</code></pre>
<div class="navbar navbar-fixed-bottom navbar-inverse">
<div class="container">
<div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
<span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
</button>
</div>
<div id="bottom-navbar" class="navbar-collapse collapse navbar-responsive-collapse">
<ul class="nav navbar-nav navbar-right">
<li class="nav">
<p class="navbar-text">
Toggle
</p>
</li>
<li class="active">
<a href="#" type="figure" class="toggle-global">Figures</a>
</li>
</ul>
<ul class="nav navbar-nav navbar-left">
<li class="dropup">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Bootstrap theme <b class="caret"></b></a>
<ul class="dropdown-menu">
<li>
<a class="theme-switch" title="Default" href="#">Default</a>
</li>
<li>
<a class="theme-switch" title="Amelia" href="#">Amelia</a>
</li>
<li>
<a class="theme-switch" title="Cerulean" href="#">Cerulean</a>
</li>
<li>
<a class="theme-switch" title="Cosmo" href="#">Cosmo</a>
</li>
<li>
<a class="theme-switch" title="Cyborg" href="#">Cyborg</a>
</li>
<li>
<a class="theme-switch" title="Journal" href="#">Journal</a>
</li>
<li>
<a class="theme-switch" title="Flatly" href="#">Flatly</a>
</li>
<li class="active">
<a class="theme-switch" title="Readable" href="#">Readable</a>
</li>
<li>
<a class="theme-switch" title="Simplex" href="#">Simplex</a>
</li>
<li>
<a class="theme-switch" title="Slate" href="#">Slate</a>
</li>
<li>
<a class="theme-switch" title="Spacelab" href="#">Spacelab</a>
</li>
<li>
<a class="theme-switch" title="United" href="#">United</a>
</li>
</ul>
</li>
</ul>
<ul class="nav navbar-nav navbar-left">
<li class="dropup">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Code highlighting <b class="caret"></b></a>
<ul class="dropdown-menu">
<li>
<a class="highlight-switch" title="HighlightJs" href="#">HighlightJs</a>
</li>
<li>
<a class="highlight-switch" title="Dark" href="#">Dark</a>
</li>
<li>
<a class="highlight-switch" title="Far" href="#">Far</a>
</li>
<li>
<a class="highlight-switch" title="Idea" href="#">Idea</a>
</li>
<li>
<a class="highlight-switch" title="Sunburst" href="#">Sunburst</a>
</li>
<li>
<a class="highlight-switch" title="Zenburn" href="#">Zenburn</a>
</li>
<li>
<a class="highlight-switch" title="Visual Studio" href="#">Visual Studio</a>
</li>
<li>
<a class="highlight-switch" title="Ascetic" href="#">Ascetic</a>
</li>
<li>
<a class="highlight-switch" title="Magula" href="#">Magula</a>
</li>
<li>
<a class="highlight-switch" title="Github" href="#">Github</a>
</li>
<li>
<a class="highlight-switch" title="Google Code" href="#">Google Code</a>
</li>
<li>
<a class="highlight-switch" title="Brown Paper" href="#">Brown Paper</a>
</li>
<li>
<a class="highlight-switch" title="School Book" href="#">School Book</a>
</li>
<li class="active">
<a class="highlight-switch" title="IR Black" href="#">IR Black</a>
</li>
<li>
<a class="highlight-switch" title="Solarized - Dark" href="#">Solarized - Dark</a>
</li>
<li>
<a class="highlight-switch" title="Solarized - Light" href="#">Solarized - Light</a>
</li>
<li>
<a class="highlight-switch" title="Arta" href="#">Arta</a>
</li>
<li>
<a class="highlight-switch" title="Monokai" href="#">Monokai</a>
</li>
<li>
<a class="highlight-switch" title="Xcode" href="#">Xcode</a>
</li>
<li>
<a class="highlight-switch" title="Pojoaque" href="#">Pojoaque</a>
</li>
<li>
<a class="highlight-switch" title="Rainbow" href="#">Rainbow</a>
</li>
<li>
<a class="highlight-switch" title="Tomorrow" href="#">Tomorrow</a>
</li>
<li>
<a class="highlight-switch" title="Tomorrow Night" href="#">Tomorrow Night</a>
</li>
<li>
<a class="highlight-switch" title="Tomorrow Night Bright" href="#">Tomorrow Night Bright</a>
</li>
<li>
<a class="highlight-switch" title="Tomorrow Night Blue" href="#">Tomorrow Night Blue</a>
</li>
<li>
<a class="highlight-switch" title="Tomorrow Night Eighties" href="#">Tomorrow Night Eighties</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<link rel="alternate stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" title="Default" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootswatch/3.0.0/amelia/bootstrap.min.css" title="Amelia" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootswatch/3.0.0/cerulean/bootstrap.min.css" title="Cerulean" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootswatch/3.0.0/cosmo/bootstrap.min.css" title="Cosmo" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootswatch/3.0.0/cyborg/bootstrap.min.css" title="Cyborg" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootswatch/3.0.0/journal/bootstrap.min.css" title="Journal" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootswatch/3.0.0/flatly/bootstrap.min.css" title="Flatly" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootswatch/3.0.0/readable/bootstrap.min.css" title="Readable" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootswatch/3.0.0/simplex/bootstrap.min.css" title="Simplex" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootswatch/3.0.0/slate/bootstrap.min.css" title="Slate" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootswatch/3.0.0/spacelab/bootstrap.min.css" title="Spacelab" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootswatch/3.0.0/united/bootstrap.min.css" title="United" media="screen"></link><link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/default.min.css" title="HighlightJs" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/dark.min.css" title="Dark" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/far.min.css" title="Far" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/idea.min.css" title="Idea" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/sunburst.min.css" title="Sunburst" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/zenburn.min.css" title="Zenburn" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/vs.min.css" title="Visual Studio" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/ascetic.min.css" title="Ascetic" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/magula.min.css" title="Magula" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/github.min.css" title="Github" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/googlecode.min.css" title="Google Code" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/brown_paper.min.css" title="Brown Paper" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/school_book.min.css" title="School Book" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/ir_black.min.css" title="IR Black" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/solarized_dark.min.css" title="Solarized - Dark" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/solarized_light.min.css" title="Solarized - Light" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/arta.min.css" title="Arta" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/monokai.min.css" title="Monokai" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/xcode.min.css" title="Xcode" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/pojoaque.min.css" title="Pojoaque" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/rainbow.min.css" title="Rainbow" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/tomorrow.min.css" title="Tomorrow" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/tomorrow-night.min.css" title="Tomorrow Night" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/tomorrow-night-bright.min.css" title="Tomorrow Night Bright" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/tomorrow-night-blue.min.css" title="Tomorrow Night Blue" media="screen"></link> <link rel="alternate stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/tomorrow-night-eighties.min.css" title="Tomorrow Night Eighties" media="screen"></link>
</div>
<div id="push">

</div>
<div id="footer">
<div class="container">
<p class="text-muted" id="credit">
Styled with <a href="https://github.com/jimhester/knitrBootstrap">knitrBootstrap</a>
</p>
</div>
</div>
<link rel="stylesheet" id="theme" href="https://netdna.bootstrapcdn.com/bootswatch/3.0.0/readable/bootstrap.min.css" media="screen"></link><link rel="stylesheet" id="highlight" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/ir_black.min.css" media="screen"></link>
</div>
</body>
</html>
